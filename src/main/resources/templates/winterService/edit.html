<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <!-- Подключение скриптов Bootstrap -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>

</head>
<body class="d-flex flex-column min-vh-100">

<div class="container-fluid">
    <div class="row">

        <!--Форма для редактирования Winter task'а-->
        <!--Form for editing the Winter task-->
        <form th:object="${editWinterTask}" th:action="@{/winter/{id}(id=${editWinterTask.getId()})}"
              method="post">

            <div class="container-fluid">
                <div class="row g-3 align-items-center">


                    <div class="col-2">
                        <label for="original_date" class="visually-hidden">Opr. dato</label>
                        <input th:field="*{orderingDate}" type="datetime-local" class="form-control" id="original_date"
                               placeholder="">
                    </div>

                    <div class="col-2">
                        <label for="pickupDate" class="visually-hidden">Opr. dato</label>
                        <input th:field="*{pickupDate}" type="date" class="form-control" id="pickupDate"
                               placeholder="">
                    </div>

                    <div class="col-2">
                        <label for="deliveryDate" class="visually-hidden">Opr. dato</label>
                        <input th:field="*{deliveryDate}" type="date" class="form-control" id="deliveryDate"
                               placeholder="">
                    </div>

                    <div class="col-2">
                        <label for="route" class="visually-hidden">Route</label>
                        <input type="text" class="form-control" id="route" placeholder="">
                    </div>

                    <div class="col-2">
                        <label for="location" class="visually-hidden">Address</label>
                        <input type="text" th:field="*{location}" class="form-control" id="location"
                               placeholder="">
                    </div>


                    <div class="col-2">
                        <label for="preparation1" class="visually-hidden">Preparation 1</label>
                        <input list="installatorsList1" type="text" th:field="*{preparation1}" class="form-control"
                               id="preparation1"
                               placeholder="">

                        <datalist id="installatorsList1">
                            <option th:each="installator : ${installatorsList}" th:value="${installator.getName()}"
                                    th:text="${installator.getInitials()} + ' ' + ${installator.getName()}"></option>
                        </datalist>
                    </div>


                    <div class="col-2">
                        <label for="preparation2" class="visually-hidden">Preparation 2</label>
                        <input list="installatorsList2" type="text" th:field="*{preparation2}" class="form-control"
                               id="preparation2"
                               placeholder="">

                        <datalist id="installatorsList2">
                            <option th:each="installator : ${installatorsList}" th:value="${installator.getName()}"
                                    th:text="${installator.getInitials()} + ' ' + ${installator.getName()}"></option>
                        </datalist>
                    </div>

                    <div class="col-2">
                        <label for="pickUp" class="visually-hidden">Pick up</label>
                        <input list="installatorsList3" type="text" th:field="*{pickup}" class="form-control"
                               id="pickUp"
                               placeholder="">

                        <datalist id="installatorsList3">
                            <option th:each="installator : ${installatorsList}" th:value="${installator.getName()}"
                                    th:text="${installator.getInitials()} + ' ' + ${installator.getName()}"></option>
                        </datalist>
                    </div>

                    <div class="col-2">
                        <label for="delivery" class="visually-hidden">Deliver</label>
                        <input list="installatorsList4" type="text" th:field="*{delivery}" class="form-control"
                               id="delivery"
                               placeholder="">

                        <datalist id="installatorsList4">
                            <option th:each="installator : ${installatorsList}" th:value="${installator.getName()}"
                                    th:text="${installator.getInitials()} + ' ' + ${installator.getName()}"></option>
                        </datalist>
                    </div>

                    <div class="col-2">
                        <label for="pinCode" class="visually-hidden">PinCode</label>
                        <input type="text" th:field="*{pinCode}" class="form-control" id="pinCode"
                               placeholder="">
                    </div>

                    <div class="col-2">
                        <label for="client" class="visually-hidden">ClientID</label>
                        <input type="text" th:field="*{client}" class="form-control" id="client"
                               placeholder="" readonly>
                    </div>

                    <div class="col-2">
                        <label for="clientName" class="visually-hidden">Client Name</label>
                        <input type="text" th:field="*{clientName}" class="form-control" id="clientName"
                               placeholder="" readonly>
                    </div>

                    <div class="col-2">
                        <label for="clientPhoneNumber" class="visually-hidden"></label>
                        <input type="text" th:field="*{clientPhoneNumber}" class="form-control" id="clientPhoneNumber"
                               placeholder="Client Phone Number" readonly>
                    </div>

                    <div class="col-2">
                        <label for="road" class="visually-hidden">Road</label>
                        <input type="text" th:field="*{road}" class="form-control" id="road"
                               placeholder="">
                    </div>

                    <div class="col-2">
                        <label for="postNumber" class="visually-hidden">Postal Code</label>
                        <input type="text" th:field="*{postNumber}" class="form-control" id="postNumber"
                               placeholder="">
                    </div>

                    <div class="col-2">
                        <label for="city" class="visually-hidden"></label>
                        <input type="text" th:field="*{city}" class="form-control" id="city"
                               placeholder="City">
                    </div>

                    <div class="col-2">
                        <label for="status" class="visually-hidden">Status</label>
                        <input list="statusList" type="text" th:field="*{status}" class="form-control" id="status"
                               placeholder="">

                        <datalist id="statusList">
                            <option value="Afhentning">Afhentning</option>
                            <option value="Afhentet">Afhentet</option>
                            <option value="Klargøring 1">Klargøring 1</option>
                            <option value="Klargøring 2">Klargøring 2</option>
                            <option value="Aflevering">Aflevering</option>
                            <option value="Færdig">Færdig</option>
                        </datalist>

                    </div>

                    <div class="col-2">
                        <label for="seller" class="visually-hidden">Seller</label>
                        <input list="buildMarketList" type="text" th:field="*{seller}" class="form-control"
                               id="seller"
                               placeholder="">

                        <datalist id="buildMarketList">
                            <option th:each="buildMarket : ${buildMarketList}" th:value="${buildMarket.getName()}"
                                    th:text="${buildMarket.getName()}"></option>
                        </datalist>
                    </div>

                    <div class="col-2">
                        <label for="clientEmail" class="visually-hidden">ClientEmail</label>
                        <input type="text" th:field="*{clientEmail}" class="form-control" id="clientEmail"
                               placeholder="" readonly>
                    </div>

                    <div class="col-2">
                        <label for="seasons" class="visually-hidden">Season</label>
                        <input list="seasons" type="text" th:field="*{season}" class="form-control"
                               id="season"
                               placeholder="">

                        <datalist id="seasons">
                            <option value="2023/2024">2023/2024</option>
                            <option value="2024/2025">2024/2025</option>
                            <option value="2025/2026">2025/2026</option>
                            <option value="2026/2027">2026/2027</option>
                            <option value="2027/2028">2027/2028</option>
                            <option value="2028/2029">2028/2029</option>
                            <option value="2029/2030">2029/2030</option>
                        </datalist>
                    </div>

                    <div class="col-2">
                        <button type="submit" class="btn btn-success mt-4" id="save-button">Save</button>
                    </div>

                </div>
            </div>

        </form>

    </div>
</div>


<!-- Просмотр робота и клиента -->
<div th:if="${defaultCondition}">

    <div class="container-fluid mt-3 ml-3">
        <div class="row">

            <!-- Кнопка для редактирования робота -->
            <!-- Button to edit the robot -->
            <button th:data-id="${robot.getId()}" class="btn btn-outline-dark mr-1" id="openLinkButton" type="button">
                Edit
                robot
            </button>

            <!-- Кнопка для редактирования клиента -->
            <!-- Button for editing the client -->
            <button type="button" id="openLinkButton2" class="btn btn-outline-dark mr-1" th:data-id="${buyer.getId()}">
                Edit
                buyer
            </button>

        </div>
    </div>


    <!-- Скрипт для редактирования робота -->
    <!-- Script for edit a robot -->
    <script src="/js/winterTask/editRobot.js"></script>


    <!-- Cкрипт для редактирования покупателя -->
    <!-- Script for editing the buyer -->
    <script src="/js/winterTask/editBuyer.js"></script>

</div>

<!-- Добавление робота и просмотр покупателя -->
<!-- Adding a Robot and Viewing a Buyer -->
<div th:if="${buyerWindowOnly}">

    <div class="container-fluid mt-3 ml-3">
        <div class="row">

            <!-- Кнопка для добавления робота -->
            <!-- Button to add a robot -->
            <button class="btn btn-outline-dark mr-1" onclick="sendAndOpenEditForm12()">Add robot</button>

            <!-- Кнопка для редактирования клиента -->
            <!-- Button for editing the client -->
            <button type="button" id="openLinkButton2" class="btn btn-outline-dark mr-1" th:data-id="${buyer.getId()}">
                Edit
                buyer
            </button>

        </div>
    </div>

    <!-- ID WinterTask'а для присваивания его покупателю -->
    <!-- WinterTask ID to assign to the customer -->
    <input id="value" type="hidden" th:value="${editWinterTask.getId()}">

    <!-- Скрипт для добавления робота -->
    <!-- Script for adding a robot -->
    <script src="/js/winterTask/addRobot.js"></script>


    <!-- Cкрипт для редактирования покупателя -->
    <!-- Script for editing the buyer -->
    <script src="/js/winterTask/editBuyer.js"></script>

</div>

<!-- Добавление покупателя и просмотр робота -->
<!-- Adding a Buyer and Viewing a Robot -->
<div th:if="${addBuyer}">

    <div class="container-fluid mt-3 ml-3">
        <div class="row">

            <!-- Кнопка для создания покупателя -->
            <!-- Button to create a customer -->
            <button class="btn btn-outline-dark mr-1" onclick="sendAndOpenEditForm()">Add buyer</button>

            <!-- Кнопка для редактирования робота -->
            <!-- Button to edit the robot -->
            <button th:data-id="${robot.getId()}" id="openLinkButton" type="button" class="btn btn-outline-dark mr-1">
                Edit robot
            </button>

        </div>
    </div>


    <!-- ID WinterTask'а для присваивания его покупателю -->
    <!-- WinterTask ID to assign to the customer -->
    <input id="value" type="hidden" th:value="${editWinterTask.getId()}">

    <!-- Скрипт для добавления покупателя при клике на кнопку Add Buyer -->
    <!-- A script for adding a customer when you click on the Add Buyer button -->
    <script src="/js/winterTask/addAllBuyer.js"></script>


    <!-- Скрипт для редактирования робота -->
    <!-- Script for edit a robot -->
    <script src="/js/winterTask/editRobot.js"></script>

</div>

<!-- Добавление робота и покупателя -->
<!-- Adding a robot and a buyer -->
<div th:if="${addAll}">

    <div class="container-fluid mt-3 ml-3">
        <div class="row">

            <!-- Кнопка для добавления робота -->
            <!-- Button to add a robot -->
            <button class="btn btn-outline-dark mr-1" onclick="sendAndOpenEditForm12()">Add robot</button>

            <!-- Кнопка для создания покупателя -->
            <!-- Button to create a customer -->
            <button class="btn btn-outline-dark mr-1" onclick="sendAndOpenEditForm()">Add buyer</button>

        </div>
    </div>


    <!-- Скрипт для добавления робота -->
    <!-- Script for adding a robot -->
    <script src="/js/winterTask/addRobot.js"></script>


    <!-- ID WinterTask'а для присваивания его покупателю -->
    <!-- WinterTask ID to assign to the customer -->
    <input id="value" type="hidden" th:value="${editWinterTask.getId()}">

    <!-- Скрипт для добавления покупателя при клике на кнопку Add Buyer -->
    <!-- A script for adding a customer when you click on the Add Buyer button -->
    <script src="/js/winterTask/addAllBuyer.js"></script>

</div>

<div class="container-fluid mt-auto">

    <div class="row align-items-end">
        <div class="col-6"
             style="position: relative; background-color: #e6e8e9; height: 300px; max-height: 300px; overflow: scroll; overflow-x: hidden">

            <div th:each="comment : ${comments}">

                <div th:text="${person_username} + ' ' + ${comment.getCreateDate().format(formattedDate)}"></div>

                <div style="display: flex; align-items: center; margin-bottom: 10px;">

                    <div style="max-width: 90%; width: 80%; word-break: break-word;" th:text="${comment.getComment()}"></div>


                    <input style="margin-left: 20%" class="comment-checkbox"
                           th:if="${commentCheck || comment.isChecked()}"
                           type="checkbox"
                           th:data-id="${comment.getId()}" th:checked="${comment.isChecked()}"/>

                    <span class="delete-comment-button" th:data-client-id="${id}"
                          th:data-id="${comment.getId()}"
                          style="cursor: pointer; color: #ff0000; font-weight: bold; position: center;">&times;</span>


                </div>


            </div>
        </div>

    </div>


    <div class="row align-items-end">
        <div class="col-11">

            <form th:action="@{/comment/winterTask}" method="post">

                <div class="container-fluid">
                    <div class="row g-3 align-items-center">

                        <input type="hidden" name="id" th:value="*{id}">

                        <div class="col-2">
                            <label for="comment" class="visually-hidden"></label>
                            <input name="comment" type="text" class="form-control" id="comment" placeholder="Comment">
                        </div>

                        <div class="col-2">
                            <button class="btn btn-outline-dark mt-4" type="submit">Save</button>
                        </div>

                    </div>
                </div>

            </form>

        </div>

        <div class="col">
            <div class="d-flex justify-content-end">
                <button id="redirectButton" type="button" class="btn btn-outline-danger float-right"
                        style="right: 0;">
                    Close
                </button>
            </div>
        </div>

    </div>

</div>

<script src="/js/winterTask/buttonScript.js"></script>
<script src="/js/winterTask/checkBoxScript.js"></script>
<script src="/js/winterTask/commentDeleteScript.js"></script>

</body>
</html>